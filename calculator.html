    <link rel="stylesheet" href="styles.css">
    <style>
        :root {
            /* NVIDIA-inspired Theme */
            --bg-app: #1a1a1a;
            --bg-panel: #2a2a2a;
            --bg-display: #333333;
            --text-main: #ffffff;
            --text-muted: #cccccc;
            --text-history: #dddddd;
            
            /* Button Colors - NVIDIA Green Theme */
            --color-feet-bg: #76b900;
            --color-inch-bg: #8bc34a;
            --color-frac-bg: #9ccc65;
            --color-op-bg: #d67a2a;
            --color-action-bg: #4a5a6a;
            --color-danger: #b03a3a;
            --color-success: #3a8a3a;
            --color-result: #4a9c4a;
            
            /* Accuracy Colors */
            --color-accuracy-16: #76b900;
            --color-accuracy-32: #8bc34a;
            --color-accuracy-64: #9ccc65;
            --color-accuracy-128: #d67a2a;
            
            --btn-radius: 4px;
            --gap: 4px;
        }

        * { 
            box-sizing: border-box; 
            touch-action: manipulation; 
            -webkit-tap-highlight-color: transparent;
        }

        .calculator-wrapper {
            width: 100%;
            max-width: 460px;
            background-color: var(--bg-panel);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
            display: flex;
            flex-direction: column;
            gap: var(--gap);
            padding: 8px;
        }

        /* --- DISPLAY SECTION --- */
        .display-container {
            background-color: var(--bg-display);
            border-radius: 6px;
            padding: 6px;
            text-align: right;
            border: 1px solid #444444;
            min-height: 100px;
            display: flex;
            flex-direction: column;
        }

        .history-container {
            height: 55px;
            overflow-y: auto;
            margin-bottom: 5px;
            padding-right: 4px;
        }

        .history-line {
            font-size: 0.7rem;
            color: var(--text-history);
            margin-bottom: 2px;
            line-height: 1.2;
            text-align: left;
            word-break: break-word;
            padding: 1px 0;
        }

        .history-line:last-child {
            margin-bottom: 0;
        }

        .main-display {
            font-size: 1.8rem;
            font-weight: 500;
            color: var(--text-main);
            min-height: 28px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding: 2px 0;
        }

        .main-display.result {
            color: var(--color-result);
        }

        .sub-display {
            font-size: 0.8rem;
            color: var(--text-muted);
            text-align: right;
            padding-top: 2px;
        }

        .history-container::-webkit-scrollbar {
            width: 4px;
        }

        .history-container::-webkit-scrollbar-track {
            background: rgba(255,255,255,0.1);
            border-radius: 2px;
        }

        .history-container::-webkit-scrollbar-thumb {
            background: rgba(118,185,0,0.5);
            border-radius: 2px;
        }

        /* --- TABS --- */
        .tabs {
            display: flex;
            gap: var(--gap);
        }

        .tab-btn {
            flex: 1;
            padding: 8px 12px;
            background-color: var(--bg-display);
            color: var(--text-muted);
            border: 1px solid #444444;
            border-radius: var(--btn-radius);
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .tab-btn:hover {
            background-color: #3a3a3a;
            color: var(--text-main);
        }

        .tab-btn.active {
            background-color: var(--color-feet-bg);
            color: var(--text-main);
            border-color: var(--color-feet-bg);
        }

        /* --- PANELS --- */
        .panel {
            display: none;
        }

        .panel.active {
            display: block;
        }

        /* --- KEYPAD SECTIONS --- */
        .dual-keypad-row {
            display: flex;
            gap: var(--gap);
        }

        .pad-section {
            flex: 1;
            background-color: var(--bg-display);
            border-radius: var(--btn-radius);
            padding: 6px;
            border: 1px solid #444444;
        }

        .pad-header {
            font-size: 0.75rem;
            font-weight: 600;
            text-align: center;
            margin-bottom: 4px;
            padding: 2px;
            border-radius: 2px;
            color: white;
        }

        .lbl-ft { background-color: var(--color-feet-bg); }
        .lbl-in { background-color: var(--color-inch-bg); }
        .lbl-fr { background-color: var(--color-frac-bg); }
        .lbl-op { background-color: var(--color-op-bg); }

        .input-preview {
            font-size: 1.2rem;
            font-weight: 500;
            text-align: center;
            margin-bottom: 6px;
            padding: 4px;
            background-color: #2a2a2a;
            border-radius: 3px;
            border: 1px solid #555555;
            min-height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .num-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--gap);
        }

        /* --- BUTTONS --- */
        .btn {
            padding: 8px 4px;
            border: none;
            border-radius: var(--btn-radius);
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.15s ease;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-ft { background-color: var(--color-feet-bg); color: white; }
        .btn-in { background-color: var(--color-inch-bg); color: white; }
        .btn-fr { background-color: var(--color-frac-bg); color: white; }
        .btn-op { background-color: var(--color-op-bg); color: white; }
        .btn-action { background-color: var(--color-action-bg); color: white; }
        .btn-danger { background-color: var(--color-danger); color: white; }
        .btn-success { background-color: var(--color-success); color: white; }

        /* --- ACCURACY SECTION --- */
        .accuracy-section {
            background-color: var(--bg-display);
            border-radius: var(--btn-radius);
            padding: 6px;
            border: 1px solid #444444;
        }

        .accuracy-header {
            font-size: 0.75rem;
            font-weight: 600;
            text-align: center;
            margin-bottom: 4px;
            color: var(--text-muted);
        }

        .accuracy-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: var(--gap);
        }

        .accuracy-btn {
            padding: 6px 4px;
            border: 1px solid #555555;
            border-radius: var(--btn-radius);
            background-color: #2a2a2a;
            color: var(--text-muted);
            font-size: 0.8rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .accuracy-btn:hover {
            background-color: #3a3a3a;
            color: var(--text-main);
        }

        .accuracy-btn.active {
            border-color: var(--color-accuracy-16);
            background-color: var(--color-accuracy-16);
            color: white;
        }

        /* --- OPERATIONS SECTION --- */
        .operations-section {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--gap);
        }

        .op-section {
            background-color: var(--bg-display);
            border-radius: var(--btn-radius);
            padding: 6px;
            border: 1px solid #444444;
        }

        .op-header {
            font-size: 0.75rem;
            font-weight: 600;
            text-align: center;
            margin-bottom: 4px;
            padding: 2px;
            border-radius: 2px;
            background-color: var(--color-op-bg);
            color: white;
        }

        .op-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--gap);
        }

        /* --- FOOTER --- */
        .keyboard-hint {
            text-align: center;
            font-size: 0.7rem;
            color: var(--text-muted);
            margin-top: 4px;
        }

        .footer-info {
            text-align: center;
            font-size: 0.6rem;
            color: var(--text-muted);
            margin-top: 2px;
        }

        /* --- TOAST NOTIFICATIONS --- */
        .toast {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--color-success);
            color: white;
            padding: 8px 16px;
            border-radius: 4px;
            font-size: 0.9rem;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .toast.show {
            opacity: 1;
        }

        /* --- RESPONSIVE --- */
        @media (max-width: 480px) {
            .calculator-wrapper {
                max-width: 100%;
                padding: 6px;
            }
            
            .main-display {
                font-size: 1.5rem;
            }
            
            .btn {
                min-height: 36px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body class="text-white">
    <!-- Navigation -->
    <nav class="dark-glass sticky top-0 z-50 border-b border-gray-800">
        <div class="max-w-7xl mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-8">
                    <a href="index.html" class="flex items-center space-x-3">
                        <div class="w-10 h-10 nvidia-gradient rounded-lg flex items-center justify-center">
                            <i data-lucide="tool" class="h-6 w-6 text-white"></i>
                        </div>
                        <div>
                            <h1 class="text-xl font-bold glow-text">detailertools.com</h1>
                            <p class="text-xs text-gray-400">Precision tools designed by detailers, for detailers: Streamlining the steel detailing workflow.</p>
                        </div>
                    </a>
                    
                    <div class="hidden md:flex items-center space-x-6">
                        <a href="index.html" class="nav-link text-gray-300 hover:text-white font-medium">Home</a>
                        <a href="checker.html" class="nav-link text-gray-300 hover:text-white font-medium">Word Checker</a>
                        <a href="calculator.html" class="nav-link active text-gray-300 hover:text-white font-medium">Calculator</a>
                        <a href="blog.html" class="nav-link text-gray-300 hover:text-white font-medium">Blog</a>
                        <a href="forum.html" class="nav-link text-gray-300 hover:text-white font-medium">Forum</a>
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="relative">
                        <input type="text" id="searchInput" placeholder="Search tools and content..." class="bg-gray-800 text-white rounded-lg px-4 py-2 pl-10 focus:outline-none focus:ring-2 focus:ring-green-500">
                        <i data-lucide="search" class="h-5 w-5 absolute left-3 top-2.5 text-gray-400"></i>
                    </div>
                    <button class="p-2 rounded-lg hover:bg-gray-800 transition-colors">
                        <i data-lucide="bell" class="h-5 w-5"></i>
                    </button>
                    <button class="p-2 rounded-lg hover:bg-gray-800 transition-colors">
                        <i data-lucide="user" class="h-5 w-5"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Mobile Navigation -->
    <div class="md:hidden dark-glass border-b border-gray-800">
        <div class="max-w-7xl mx-auto px-4 py-3">
            <div class="flex justify-around">
                <a href="index.html" class="nav-link text-gray-300 hover:text-white font-medium text-sm">
                    <i data-lucide="home" class="h-4 w-4 mx-auto mb-1"></i>
                    Home
                </a>
                <a href="checker.html" class="nav-link text-gray-300 hover:text-white font-medium text-sm">
                    <i data-lucide="search" class="h-4 w-4 mx-auto mb-1"></i>
                    Checker
                </a>
                <a href="calculator.html" class="nav-link active text-gray-300 hover:text-white font-medium text-sm">
                    <i data-lucide="calculator" class="h-4 w-4 mx-auto mb-1"></i>
                    Calc
                </a>
                <a href="blog.html" class="nav-link text-gray-300 hover:text-white font-medium text-sm">
                    <i data-lucide="file-text" class="h-4 w-4 mx-auto mb-1"></i>
                    Blog
                </a>
                <a href="forum.html" class="nav-link text-gray-300 hover:text-white font-medium text-sm">
                    <i data-lucide="message-circle" class="h-4 w-4 mx-auto mb-1"></i>
                    Forum
                </a>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 py-8">
        <div class="mb-8">
            <h1 class="text-3xl font-bold mb-2">Feet & Inch Calculator</h1>
            <p class="text-gray-400">Advanced calculations for steel detailing with feet and inch measurements</p>
        </div>

        <div class="flex justify-center">
            <div class="calculator-wrapper">
                <!-- Display Section -->
                <div class="display-container">
                    <!-- History Container with Fixed Height -->
                    <div class="history-container" id="historyContainer">
                        <!-- History lines will be inserted here by JavaScript -->
                    </div>
                    
                    <!-- Main Display -->
                    <div class="main-display" id="display">0' 0"</div>
                    <div class="sub-display" id="subDisplay">0.0000 ft</div>
                </div>

                <!-- Tabs -->
                <div class="tabs">
                    <button class="tab-btn active" onclick="switchMode('feet-inch')">Feet-Inch</button>
                    <button class="tab-btn" onclick="switchMode('normal')">Normal</button>
                    <button class="tab-btn" onclick="switchMode('convert')">Convert</button>
                </div>

                <!-- === MODE: FEET-INCH === -->
                <div id="panel-feet-inch" class="panel active">
                    
                    <!-- Dual Keypads -->
                    <div class="dual-keypad-row">
                        <!-- FEET -->
                        <div class="pad-section">
                            <div class="pad-header lbl-ft">FEET</div>
                            <div class="input-preview" id="previewFeet">0</div>
                            <div class="num-grid">
                                <button class="btn btn-ft" onclick="fi.appendFeet(7)">7</button>
                                <button class="btn btn-ft" onclick="fi.appendFeet(8)">8</button>
                                <button class="btn btn-ft" onclick="fi.appendFeet(9)">9</button>
                                <button class="btn btn-ft" onclick="fi.appendFeet(4)">4</button>
                                <button class="btn btn-ft" onclick="fi.appendFeet(5)">5</button>
                                <button class="btn btn-ft" onclick="fi.appendFeet(6)">6</button>
                                <button class="btn btn-ft" onclick="fi.appendFeet(1)">1</button>
                                <button class="btn btn-ft" onclick="fi.appendFeet(2)">2</button>
                                <button class="btn btn-ft" onclick="fi.appendFeet(3)">3</button>
                                <button class="btn btn-danger" onclick="fi.clearFeet()">C</button>
                                <button class="btn btn-ft" onclick="fi.appendFeet(0)">0</button>
                                <button class="btn btn-danger" onclick="fi.backspaceFeet()">⌫</button>
                            </div>
                        </div>

                        <!-- INCHES -->
                        <div class="pad-section">
                            <div class="pad-header lbl-in">INCHES</div>
                            <div class="input-preview" id="previewInch">0</div>
                            <div class="num-grid">
                                <button class="btn btn-in" onclick="fi.appendInch(7)">7</button>
                                <button class="btn btn-in" onclick="fi.appendInch(8)">8</button>
                                <button class="btn btn-in" onclick="fi.appendInch(9)">9</button>
                                <button class="btn btn-in" onclick="fi.appendInch(4)">4</button>
                                <button class="btn btn-in" onclick="fi.appendInch(5)">5</button>
                                <button class="btn btn-in" onclick="fi.appendInch(6)">6</button>
                                <button class="btn btn-in" onclick="fi.appendInch(1)">1</button>
                                <button class="btn btn-in" onclick="fi.appendInch(2)">2</button>
                                <button class="btn btn-in" onclick="fi.appendInch(3)">3</button>
                                <button class="btn btn-danger" onclick="fi.clearInch()">C</button>
                                <button class="btn btn-in" onclick="fi.appendInch(0)">0</button>
                                <button class="btn btn-danger" onclick="fi.backspaceInch()">⌫</button>
                            </div>
                        </div>
                    </div>

                    <!-- FRACTIONS -->
                    <div class="pad-section">
                        <div class="pad-header lbl-fr">FRACTIONS</div>
                        <div class="input-preview" id="previewFrac">0</div>
                        <div class="num-grid">
                            <button class="btn btn-fr" onclick="fi.setFraction(0.125)">⅛</button>
                            <button class="btn btn-fr" onclick="fi.setFraction(0.25)">¼</button>
                            <button class="btn btn-fr" onclick="fi.setFraction(0.375)">⅜</button>
                            <button class="btn btn-fr" onclick="fi.setFraction(0.5)">½</button>
                            <button class="btn btn-fr" onclick="fi.setFraction(0.625)">⅝</button>
                            <button class="btn btn-fr" onclick="fi.setFraction(0.75)">¾</button>
                            <button class="btn btn-fr" onclick="fi.setFraction(0.875)">⅞</button>
                            <button class="btn btn-danger" onclick="fi.clearFrac()">C</button>
                            <input type="text" id="customFrac" class="btn btn-fr" placeholder="1/16" style="text-align: center; background: #2a7a7a; border: none; color: white;" onkeydown="handleCustomFractionKeydown(event)" onkeypress="handleCustomFractionKeypress(event)">
                            <button class="btn btn-danger" onclick="fi.backspaceFrac()">⌫</button>
                        </div>
                    </div>

                    <!-- OPERATIONS -->
                    <div class="dual-keypad-row">
                        <div class="pad-section">
                            <div class="pad-header lbl-op">OPERATIONS</div>
                            <div class="op-grid">
                                <button class="btn btn-op" onclick="fi.setOperation('+')">+</button>
                                <button class="btn btn-op" onclick="fi.setOperation('-')">-</button>
                                <button class="btn btn-op" onclick="fi.setOperation('*')">×</button>
                                <button class="btn btn-op" onclick="fi.setOperation('/')">÷</button>
                            </div>
                        </div>

                        <div class="pad-section">
                            <div class="pad-header lbl-op">ACTIONS</div>
                            <div class="op-grid">
                                <button class="btn btn-success" onclick="fi.calculate()">=</button>
                                <button class="btn btn-danger" onclick="fi.clearAll()">AC</button>
                                <button class="btn btn-action" onclick="fi.undo()">↶</button>
                                <button class="btn btn-action" onclick="fi.swap()">⇄</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- === MODE: NORMAL === -->
                <div id="panel-normal" class="panel">
                    <div class="pad-section">
                        <div class="input-preview" id="normalDisplay">0</div>
                        <div class="num-grid">
                            <button class="btn btn-ft" onclick="norm.append(7)">7</button>
                            <button class="btn btn-ft" onclick="norm.append(8)">8</button>
                            <button class="btn btn-ft" onclick="norm.append(9)">9</button>
                            <button class="btn btn-op" onclick="norm.setOp('/')">÷</button>
                            <button class="btn btn-ft" onclick="norm.append(4)">4</button>
                            <button class="btn btn-ft" onclick="norm.append(5)">5</button>
                            <button class="btn btn-ft" onclick="norm.append(6)">6</button>
                            <button class="btn btn-op" onclick="norm.setOp('*')">×</button>
                            <button class="btn btn-ft" onclick="norm.append(1)">1</button>
                            <button class="btn btn-ft" onclick="norm.append(2)">2</button>
                            <button class="btn btn-ft" onclick="norm.append(3)">3</button>
                            <button class="btn btn-op" onclick="norm.setOp('-')">−</button>
                            <button class="btn btn-danger" onclick="norm.clear()">C</button>
                            <button class="btn btn-ft" onclick="norm.append(0)">0</button>
                            <button class="btn btn-success" onclick="norm.calculate()">=</button>
                            <button class="btn btn-op" onclick="norm.setOp('+')">+</button>
                            <button class="btn btn-ft" onclick="norm.decimal()">.</button>
                            <button class="btn btn-danger" onclick="norm.backspace()">⌫</button>
                        </div>
                    </div>
                </div>

                <!-- === MODE: CONVERT === -->
                <div id="panel-convert" class="panel">
                    <div class="pad-section">
                        <div class="input-preview" id="convertDisplay">0</div>
                        <div class="num-grid">
                            <button class="btn btn-ft" onclick="conv.append(7)">7</button>
                            <button class="btn btn-ft" onclick="conv.append(8)">8</button>
                            <button class="btn btn-ft" onclick="conv.append(9)">9</button>
                            <button class="btn btn-action" onclick="conv.setMode('ft')">FT</button>
                            <button class="btn btn-ft" onclick="conv.append(4)">4</button>
                            <button class="btn btn-ft" onclick="conv.append(5)">5</button>
                            <button class="btn btn-ft" onclick="conv.append(6)">6</button>
                            <button class="btn btn-action" onclick="conv.setMode('in')">IN</button>
                            <button class="btn btn-ft" onclick="conv.append(1)">1</button>
                            <button class="btn btn-ft" onclick="conv.append(2)">2</button>
                            <button class="btn btn-ft" onclick="conv.append(3)">3</button>
                            <button class="btn btn-action" onclick="conv.setMode('mm')">MM</button>
                            <button class="btn btn-danger" onclick="conv.clear()">C</button>
                            <button class="btn btn-ft" onclick="conv.append(0)">0</button>
                            <button class="btn btn-success" onclick="conv.convert()">=</button>
                            <button class="btn btn-action" onclick="conv.setMode('cm')">CM</button>
                            <button class="btn btn-ft" onclick="conv.decimal()">.</button>
                            <button class="btn btn-danger" onclick="conv.backspace()">⌫</button>
                        </div>
                    </div>
                </div>

                <!-- === ACCURACY SELECTION === -->
                <div class="accuracy-section">
                    <div class="accuracy-header">FRACTION ACCURACY</div>
                    <div class="accuracy-grid">
                        <button class="accuracy-btn active" onclick="setAccuracy(16)">1/16</button>
                        <button class="accuracy-btn" onclick="setAccuracy(32)">1/32</button>
                        <button class="accuracy-btn" onclick="setAccuracy(64)">1/64</button>
                        <button class="accuracy-btn" onclick="setAccuracy(128)">1/128</button>
                    </div>
                </div>

                <!-- === OPERATIONS SECTION === -->
                <div class="operations-section">
                    <div class="op-section">
                        <div class="op-header">MEMORY</div>
                        <div class="op-grid">
                            <button class="btn btn-action" onclick="mem.store()">MS</button>
                            <button class="btn btn-action" onclick="mem.recall()">MR</button>
                            <button class="btn btn-action" onclick="mem.clear()">MC</button>
                            <button class="btn btn-action" onclick="mem.add()">M+</button>
                        </div>
                    </div>

                    <div class="op-section">
                        <div class="op-header">CONSTANTS</div>
                        <div class="op-grid">
                            <button class="btn btn-action" onclick="shared.setPi()">π</button>
                            <button class="btn btn-action" onclick="shared.setE()">e</button>
                            <button class="btn btn-action" onclick="shared.setPhi()">φ</button>
                            <button class="btn btn-action" onclick="shared.setSqrt2()">√2</button>
                        </div>
                    </div>
                </div>

                <div class="keyboard-hint">
                    Keyboard: Numbers, operators (+-*/), Enter for =, Backspace to delete
                </div>
                
                <div class="footer-info">
                    Construction Calculator v2.0
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="dark-glass border-t border-gray-800 mt-16">
        <div class="max-w-7xl mx-auto px-4 py-8">
            <div class="grid md:grid-cols-4 gap-8">
                <div>
                    <div class="flex items-center space-x-3 mb-4">
                        <div class="w-8 h-8 nvidia-gradient rounded-lg flex items-center justify-center">
                            <i data-lucide="tool" class="h-4 w-4 text-white"></i>
                        </div>
                        <h3 class="text-lg font-bold">detailertools.com</h3>
                    </div>
                    <p class="text-sm text-gray-400">Precision tools designed by detailers, for detailers: Streamlining the steel detailing workflow.</p>
                </div>
                
                <div>
                    <h4 class="font-semibold mb-4">Tools</h4>
                    <ul class="space-y-2 text-sm text-gray-400">
                        <li><a href="checker.html" class="hover:text-white transition-colors">Word Checker</a></li>
                        <li><a href="calculator.html" class="hover:text-white transition-colors">Calculator</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="font-semibold mb-4">Community</h4>
                    <ul class="space-y-2 text-sm text-gray-400">
                        <li><a href="blog.html" class="hover:text-white transition-colors">Blog</a></li>
                        <li><a href="forum.html" class="hover:text-white transition-colors">Forum</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="font-semibold mb-4">Connect</h4>
                    <div class="flex space-x-4">
                        <button class="p-2 rounded-lg hover:bg-gray-800 transition-colors">
                            <i data-lucide="github" class="h-5 w-5"></i>
                        </button>
                        <button class="p-2 rounded-lg hover:bg-gray-800 transition-colors">
                            <i data-lucide="twitter" class="h-5 w-5"></i>
                        </button>
                        <button class="p-2 rounded-lg hover:bg-gray-800 transition-colors">
                            <i data-lucide="linkedin" class="h-5 w-5"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="border-t border-gray-800 mt-8 pt-8 text-center text-sm text-gray-400">
                <p>© 2024 detailertools.com. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // --- STATE MANAGEMENT ---
        const STATE = {
            mode: 'feet-inch',
            accuracy: 16,
            memory: 0,
            history: [],
            feetInch: {
                feet: '0',
                inch: '0',
                frac: '0',
                operation: null,
                prevValue: null,
                awaitingSecond: false
            },
            normal: {
                display: '0',
                prevValue: null,
                operation: null,
                awaitingSecond: false
            },
            convert: {
                display: '0',
                mode: 'ft'
            }
        };

        // DOM Elements
        const els = {
            display: document.getElementById('display'),
            subDisplay: document.getElementById('subDisplay'),
            historyContainer: document.getElementById('historyContainer'),
            previewFeet: document.getElementById('previewFeet'),
            previewInch: document.getElementById('previewInch'),
            previewFrac: document.getElementById('previewFrac'),
            normalDisplay: document.getElementById('normalDisplay'),
            convertDisplay: document.getElementById('convertDisplay'),
            customFrac: document.getElementById('customFrac'),
            directValue: document.getElementById('directValue')
        };

        // --- UTILITY FUNCTIONS ---
        const gcd = (a, b) => b ? gcd(b, a % b) : a;

        function showToast(message, duration = 1800) {
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => toast.classList.add('show'), 10);
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => document.body.removeChild(toast), 300);
            }, duration);
        }

        function debounce(func, wait = 80) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // --- HISTORY MANAGEMENT ---
        function updateHistoryDisplay() {
            els.historyContainer.innerHTML = '';
            STATE.history.slice(-3).forEach(entry => {
                const line = document.createElement('div');
                line.className = 'history-line';
                line.textContent = entry;
                els.historyContainer.appendChild(line);
            });
        }

        function addToHistory(entry) {
            STATE.history.push(entry);
            if (STATE.history.length > 50) STATE.history.shift();
            updateHistoryDisplay();
            saveState();
        }

        function saveState() {
            try {
                localStorage.setItem('calcState', JSON.stringify(STATE));
            } catch (e) {
                // Ignore storage errors
            }
        }

        // --- ACCURACY MANAGEMENT ---
        function setAccuracy(denominator) {
            STATE.accuracy = denominator;
            document.querySelectorAll('.accuracy-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            saveState();
        }

        // --- MODE MANAGEMENT ---
        function switchMode(mode) {
            STATE.mode = mode;
            document.querySelectorAll('.panel').forEach(panel => {
                panel.classList.remove('active');
            });
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById('panel-' + mode).classList.add('active');
            document.querySelector(`[onclick="switchMode('${mode}')"]`).classList.add('active');
            saveState();
        }

        // --- CUSTOM FRACTION INPUT HANDLING ---
        function handleCustomFractionKeydown(event) {
            if (event.key === 'Enter') {
                event.preventDefault();
                const value = event.target.value.trim();
                if (value) {
                    const parts = value.split('/');
                    if (parts.length === 2) {
                        const num = parseInt(parts[0]);
                        const den = parseInt(parts[1]);
                        if (num > 0 && den > 0 && num < den) {
                            fi.setFraction(num / den);
                            event.target.value = '';
                        }
                    }
                }
            }
        }

        function handleCustomFractionKeypress(event) {
            // Allow numbers, slash, and backspace
            if (!/[0-9\/]/.test(event.key) && event.key !== 'Backspace' && event.key !== 'Enter') {
                event.preventDefault();
            }
        }

        // --- FEET-INCH LOGIC ---
        const fi = {
            updateDisplay() {
                const feet = parseInt(STATE.feetInch.feet) || 0;
                const inch = parseInt(STATE.feetInch.inch) || 0;
                const frac = parseFloat(STATE.feetInch.frac) || 0;
                
                let display = `${feet}' ${inch + frac}"`;
                if (frac > 0 && frac < 1) {
                    const fracStr = fi.decimalToFraction(frac);
                    display = `${feet}' ${inch} ${fracStr}"`;
                }
                
                const decimal = feet + (inch + frac) / 12;
                els.display.textContent = display;
                els.subDisplay.textContent = `${decimal.toFixed(4)} ft`;
                
                els.previewFeet.textContent = STATE.feetInch.feet;
                els.previewInch.textContent = STATE.feetInch.inch;
                els.previewFrac.textContent = frac > 0 ? fi.decimalToFraction(frac) : '0';
            },

            decimalToFraction(decimal) {
                const tolerance = 1 / STATE.accuracy;
                for (let den = 1; den <= STATE.accuracy; den++) {
                    for (let num = 1; num < den; num++) {
                        if (Math.abs(num / den - decimal) < tolerance) {
                            const g = gcd(num, den);
                            return `${num/g}/${den/g}`;
                        }
                    }
                }
                return decimal.toFixed(4);
            },

            appendFeet(digit) {
                if (STATE.feetInch.awaitingSecond) {
                    STATE.feetInch.feet = digit.toString();
                    STATE.feetInch.awaitingSecond = false;
                } else {
                    if (STATE.feetInch.feet === '0') {
                        STATE.feetInch.feet = digit.toString();
                    } else {
                        STATE.feetInch.feet += digit.toString();
                    }
                }
                fi.updateDisplay();
            },

            appendInch(digit) {
                if (STATE.feetInch.awaitingSecond) {
                    STATE.feetInch.inch = digit.toString();
                    STATE.feetInch.awaitingSecond = false;
                } else {
                    if (STATE.feetInch.inch === '0') {
                        STATE.feetInch.inch = digit.toString();
                    } else {
                        STATE.feetInch.inch += digit.toString();
                    }
                }
                fi.updateDisplay();
            },

            setFraction(value) {
                STATE.feetInch.frac = value.toString();
                fi.updateDisplay();
            },

            clearFeet() {
                STATE.feetInch.feet = '0';
                fi.updateDisplay();
            },

            clearInch() {
                STATE.feetInch.inch = '0';
                fi.updateDisplay();
            },

            clearFrac() {
                STATE.feetInch.frac = '0';
                fi.updateDisplay();
            },

            backspaceFeet() {
                STATE.feetInch.feet = STATE.feetInch.feet.slice(0, -1) || '0';
                fi.updateDisplay();
            },

            backspaceInch() {
                STATE.feetInch.inch = STATE.feetInch.inch.slice(0, -1) || '0';
                fi.updateDisplay();
            },

            backspaceFrac() {
                STATE.feetInch.frac = '0';
                fi.updateDisplay();
            },

            setOperation(op) {
                const currentValue = parseInt(STATE.feetInch.feet) + (parseInt(STATE.feetInch.inch) + parseFloat(STATE.feetInch.frac)) / 12;
                
                if (STATE.feetInch.prevValue !== null && !STATE.feetInch.awaitingSecond) {
                    fi.calculate();
                }
                
                STATE.feetInch.operation = op;
                STATE.feetInch.prevValue = currentValue;
                STATE.feetInch.awaitingSecond = true;
                
                addToHistory(`${fi.formatValue(currentValue)} ${op}`);
            },

            calculate() {
                if (STATE.feetInch.prevValue === null || STATE.feetInch.operation === null) return;
                
                const currentValue = parseInt(STATE.feetInch.feet) + (parseInt(STATE.feetInch.inch) + parseFloat(STATE.feetInch.frac)) / 12;
                let result;
                
                switch (STATE.feetInch.operation) {
                    case '+': result = STATE.feetInch.prevValue + currentValue; break;
                    case '-': result = STATE.feetInch.prevValue - currentValue; break;
                    case '*': result = STATE.feetInch.prevValue * currentValue; break;
                    case '/': result = STATE.feetInch.prevValue / currentValue; break;
                }
                
                addToHistory(`${fi.formatValue(STATE.feetInch.prevValue)} ${STATE.feetInch.operation} ${fi.formatValue(currentValue)} = ${fi.formatValue(result)}`);
                
                // Convert result back to feet-inch
                const feet = Math.floor(result);
                const remaining = (result - feet) * 12;
                const inch = Math.floor(remaining);
                const frac = remaining - inch;
                
                STATE.feetInch.feet = feet.toString();
                STATE.feetInch.inch = inch.toString();
                STATE.feetInch.frac = frac.toFixed(6);
                STATE.feetInch.prevValue = null;
                STATE.feetInch.operation = null;
                STATE.feetInch.awaitingSecond = false;
                
                fi.updateDisplay();
            },

            formatValue(value) {
                const feet = Math.floor(value);
                const inch = Math.floor((value - feet) * 12);
                const frac = ((value - feet) * 12) - inch;
                let result = `${feet}' ${inch}`;
                if (frac > 0.001) {
                    result += ` ${fi.decimalToFraction(frac)}`;
                }
                result += '"';
                return result;
            },

            clearAll() {
                STATE.feetInch = {
                    feet: '0',
                    inch: '0',
                    frac: '0',
                    operation: null,
                    prevValue: null,
                    awaitingSecond: false
                };
                fi.updateDisplay();
            },

            undo() {
                // Simple undo - could be enhanced
                fi.clearAll();
            },

            swap() {
                // Swap feet and inches
                const temp = STATE.feetInch.feet;
                STATE.feetInch.feet = STATE.feetInch.inch;
                STATE.feetInch.inch = temp;
                fi.updateDisplay();
            }
        };

        // --- NORMAL MODE LOGIC ---
        const norm = {
            updateDisplay() {
                els.normalDisplay.textContent = STATE.normal.display;
            },

            append(digit) {
                if (STATE.normal.awaitingSecond) {
                    STATE.normal.display = digit.toString();
                    STATE.normal.awaitingSecond = false;
                } else {
                    if (STATE.normal.display === '0') {
                        STATE.normal.display = digit.toString();
                    } else {
                        STATE.normal.display += digit.toString();
                    }
                }
                norm.updateDisplay();
            },

            decimal() {
                if (!STATE.normal.display.includes('.')) {
                    STATE.normal.display += '.';
                }
                norm.updateDisplay();
            },

            setOp(op) {
                const currentValue = parseFloat(STATE.normal.display);
                
                if (STATE.normal.prevValue !== null && !STATE.normal.awaitingSecond) {
                    norm.calculate();
                }
                
                STATE.normal.operation = op;
                STATE.normal.prevValue = currentValue;
                STATE.normal.awaitingSecond = true;
                
                addToHistory(`${currentValue} ${op}`);
            },

            calculate() {
                if (STATE.normal.prevValue === null || STATE.normal.operation === null) return;
                
                const currentValue = parseFloat(STATE.normal.display);
                let result;
                
                switch (STATE.normal.operation) {
                    case '+': result = STATE.normal.prevValue + currentValue; break;
                    case '-': result = STATE.normal.prevValue - currentValue; break;
                    case '*': result = STATE.normal.prevValue * currentValue; break;
                    case '/': result = STATE.normal.prevValue / currentValue; break;
                }
                
                addToHistory(`${STATE.normal.prevValue} ${STATE.normal.operation} ${currentValue} = ${result}`);
                
                STATE.normal.display = result.toString();
                STATE.normal.prevValue = null;
                STATE.normal.operation = null;
                STATE.normal.awaitingSecond = false;
                
                norm.updateDisplay();
            },

            clear() {
                STATE.normal.display = '0';
                STATE.normal.prevValue = null;
                STATE.normal.operation = null;
                STATE.normal.awaitingSecond = false;
                norm.updateDisplay();
            },

            backspace() {
                if (STATE.normal.display.length > 1) {
                    STATE.normal.display = STATE.normal.display.slice(0, -1);
                } else {
                    STATE.normal.display = '0';
                }
                norm.updateDisplay();
            }
        };

        // --- SHARED LOGIC ---
        const shared = {
            setPi() {
                if (STATE.mode === 'feet-inch') {
                    // Could convert π to feet-inch, but for now just show in sub-display
                    els.subDisplay.textContent = Math.PI.toFixed(6);
                } else if (STATE.mode === 'normal') {
                    STATE.normal.display = Math.PI.toString();
                    norm.updateDisplay();
                }
            },

            setE() {
                if (STATE.mode === 'feet-inch') {
                    els.subDisplay.textContent = Math.E.toFixed(6);
                } else if (STATE.mode === 'normal') {
                    STATE.normal.display = Math.E.toString();
                    norm.updateDisplay();
                }
            },

            setPhi() {
                const phi = (1 + Math.sqrt(5)) / 2;
                if (STATE.mode === 'feet-inch') {
                    els.subDisplay.textContent = phi.toFixed(6);
                } else if (STATE.mode === 'normal') {
                    STATE.normal.display = phi.toString();
                    norm.updateDisplay();
                }
            },

            setSqrt2() {
                const sqrt2 = Math.sqrt(2);
                if (STATE.mode === 'feet-inch') {
                    els.subDisplay.textContent = sqrt2.toFixed(6);
                } else if (STATE.mode === 'normal') {
                    STATE.normal.display = sqrt2.toString();
                    norm.updateDisplay();
                }
            }
        };

        // --- CONVERSION LOGIC ---
        const conv = {
            updateDisplay() {
                els.convertDisplay.textContent = STATE.convert.display;
            },

            append(digit) {
                if (STATE.convert.display === '0') {
                    STATE.convert.display = digit.toString();
                } else {
                    STATE.convert.display += digit.toString();
                }
                conv.updateDisplay();
            },

            decimal() {
                if (!STATE.convert.display.includes('.')) {
                    STATE.convert.display += '.';
                }
                conv.updateDisplay();
            },

            setMode(mode) {
                STATE.convert.mode = mode;
                // Update display to show current mode
                conv.updateDisplay();
            },

            convert() {
                const value = parseFloat(STATE.convert.display);
                let result;
                
                switch (STATE.convert.mode) {
                    case 'ft':
                        result = value * 12; // feet to inches
                        addToHistory(`${value} ft = ${result} in`);
                        break;
                    case 'in':
                        result = value / 12; // inches to feet
                        addToHistory(`${value} in = ${result} ft`);
                        break;
                    case 'mm':
                        result = value / 25.4; // mm to inches
                        addToHistory(`${value} mm = ${result} in`);
                        break;
                    case 'cm':
                        result = value / 2.54; // cm to inches
                        addToHistory(`${value} cm = ${result} in`);
                        break;
                }
                
                STATE.convert.display = result.toFixed(4);
                conv.updateDisplay();
            },

            clear() {
                STATE.convert.display = '0';
                conv.updateDisplay();
            },

            backspace() {
                if (STATE.convert.display.length > 1) {
                    STATE.convert.display = STATE.convert.display.slice(0, -1);
                } else {
                    STATE.convert.display = '0';
                }
                conv.updateDisplay();
            }
        };

        // --- MEMORY ---
        const mem = {
            store() {
                if (STATE.mode === 'feet-inch') {
                    const value = parseInt(STATE.feetInch.feet) + (parseInt(STATE.feetInch.inch) + parseFloat(STATE.feetInch.frac)) / 12;
                    STATE.memory = value;
                } else if (STATE.mode === 'normal') {
                    STATE.memory = parseFloat(STATE.normal.display);
                }
                showToast('Stored in memory');
                saveState();
            },

            recall() {
                if (STATE.mode === 'feet-inch') {
                    const feet = Math.floor(STATE.memory);
                    const remaining = (STATE.memory - feet) * 12;
                    const inch = Math.floor(remaining);
                    const frac = remaining - inch;
                    
                    STATE.feetInch.feet = feet.toString();
                    STATE.feetInch.inch = inch.toString();
                    STATE.feetInch.frac = frac.toFixed(6);
                    fi.updateDisplay();
                } else if (STATE.mode === 'normal') {
                    STATE.normal.display = STATE.memory.toString();
                    norm.updateDisplay();
                }
                showToast('Recalled from memory');
            },

            clear() {
                STATE.memory = 0;
                showToast('Memory cleared');
                saveState();
            },

            add() {
                let currentValue;
                if (STATE.mode === 'feet-inch') {
                    currentValue = parseInt(STATE.feetInch.feet) + (parseInt(STATE.feetInch.inch) + parseFloat(STATE.feetInch.frac)) / 12;
                } else if (STATE.mode === 'normal') {
                    currentValue = parseFloat(STATE.normal.display);
                }
                STATE.memory += currentValue;
                showToast('Added to memory');
                saveState();
            }
        };

        // --- INITIALIZATION ---
        switchMode('feet-inch');
        fi.updateDisplay();
        updateHistoryDisplay();

        // Auto-clear custom fraction input on focus
        els.customFrac.addEventListener('focus', function() {
            this.select();
        });

        // Auto-format common decimals
        els.customFrac.addEventListener('blur', function() {
            const value = this.value.trim();
            if (value) {
                const parts = value.split('/');
                if (parts.length === 2) {
                    const num = parseInt(parts[0]);
                    const den = parseInt(parts[1]);
                    if (num > 0 && den > 0 && num < den) {
                        this.value = `${num}/${den}`;
                    }
                }
            }
        });

        // Handle Enter key in direct conversion input
        els.directValue.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                conv.convert();
            }
        });

        // Initialize Lucide icons
        document.addEventListener('DOMContentLoaded', function() {
            lucide.createIcons();
        });

        // Search functionality
        document.getElementById('searchInput').addEventListener('input', function() {
            const query = this.value.toLowerCase();
            // Simple search
            const elements = document.querySelectorAll('h1, h2, h3, p');
            elements.forEach(el => {
                if (el.textContent.toLowerCase().includes(query)) {
                    el.style.display = 'block';
                } else {
                    el.style.display = 'none';
                }
            });
        });
    </script>
</body>
</html>